<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CarouselSupplierFactoryAdapter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Nasdanika Bootstrap Model Generation Adapters</a> &gt; <a href="index.source.html" class="el_package">org.nasdanika.html.model.bootstrap.gen</a> &gt; <span class="el_source">CarouselSupplierFactoryAdapter.java</span></div><h1>CarouselSupplierFactoryAdapter.java</h1><pre class="source lang-java linenums">package org.nasdanika.html.model.bootstrap.gen;

import java.util.List;

import org.eclipse.emf.common.notify.AdapterFactory;
import org.nasdanika.common.BiSupplier;
import org.nasdanika.common.Context;
import org.nasdanika.common.Function;
import org.nasdanika.common.ListCompoundSupplierFactory;
import org.nasdanika.common.ProgressMonitor;
import org.nasdanika.common.Util;
import org.nasdanika.emf.EObjectAdaptable;
import org.nasdanika.html.Button;
import org.nasdanika.html.HTMLElement;
import org.nasdanika.html.HTMLFactory;
import org.nasdanika.html.Tag;
import org.nasdanika.html.TagName;
import org.nasdanika.html.model.bootstrap.Carousel;

public class CarouselSupplierFactoryAdapter extends DivSupplierFactoryAdapter&lt;Carousel&gt; {
	
	public CarouselSupplierFactoryAdapter(Carousel carousel, AdapterFactory adapterFactory) {
<span class="nc" id="L23">		super(carousel, adapterFactory);</span>
<span class="nc" id="L24">	}</span>
	
	@Override
	protected Function&lt;org.nasdanika.html.Tag, org.nasdanika.html.Tag&gt; createConfigureFunction(Context context) {
		
		@SuppressWarnings(&quot;resource&quot;)
<span class="nc" id="L30">		Function&lt;BiSupplier&lt;Tag, List&lt;Object&gt;&gt;, Tag&gt; carouselFunction = new Function&lt;BiSupplier&lt;Tag, List&lt;Object&gt;&gt;, Tag&gt;() {</span>
			
			@Override
			public double size() {
<span class="nc" id="L34">				return 1;</span>
			}
			
			@Override
			public String name() {
<span class="nc" id="L39">				return &quot;Carousel&quot;;</span>
			}
			
			@Override
			public Tag execute(BiSupplier&lt;Tag, List&lt;Object&gt;&gt; input, ProgressMonitor progressMonitor) {
<span class="nc" id="L44">				Tag tag = input.getFirst();</span>
<span class="nc" id="L45">				tag.addClass(&quot;carousel&quot;, &quot;slide&quot;);</span>
<span class="nc" id="L46">				Carousel semanticElement = getTarget();</span>
<span class="nc bnc" id="L47" title="All 2 branches missed.">				if (semanticElement.isRide()) {</span>
<span class="nc" id="L48">					tag.attribute(&quot;data-ride&quot;, &quot;carousel&quot;);</span>
				}
<span class="nc bnc" id="L50" title="All 2 branches missed.">				if (!Util.isBlank(semanticElement.getInterval())) {</span>
<span class="nc" id="L51">					tag.attribute(&quot;data-interval&quot;, semanticElement.getInterval());</span>
				}

<span class="nc" id="L54">				List&lt;Object&gt; slides = input.getSecond();</span>
<span class="nc" id="L55">				HTMLFactory htmlFactory = tag.getFactory();</span>
				
<span class="nc" id="L57">				Object id = tag.getId();</span>
<span class="nc bnc" id="L58" title="All 2 branches missed.">				if (id == null) {</span>
<span class="nc" id="L59">					id = htmlFactory.nextId();</span>
<span class="nc" id="L60">					tag.id(id);</span>
				}
				
<span class="nc" id="L63">				Tag indicatorsList = null;</span>
				
				// indicator
<span class="nc bnc" id="L66" title="All 2 branches missed.">				if (semanticElement.isIndicator()) {</span>
<span class="nc" id="L67">					indicatorsList = htmlFactory.tag(TagName.ol).addClass(&quot;carousel-indicators&quot;);</span>
<span class="nc" id="L68">					tag.accept(indicatorsList);</span>
				}
				
<span class="nc" id="L71">				Tag carouselInner = htmlFactory.div().addClass(&quot;carousel-inner&quot;);</span>
<span class="nc" id="L72">				tag.accept(carouselInner);</span>
<span class="nc" id="L73">				int index = 0;</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">				for (Object slide: slides) {</span>
<span class="nc" id="L75">					carouselInner.accept(slide);</span>
<span class="nc" id="L76">					Tag indicator = null;</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">					if (indicatorsList != null) {</span>
<span class="nc" id="L78">						indicator = htmlFactory.tag(TagName.li)</span>
<span class="nc" id="L79">							.attribute(&quot;data-target&quot;, &quot;#&quot; + id)</span>
<span class="nc" id="L80">							.attribute(&quot;data-slide-to&quot;, index);</span>
<span class="nc" id="L81">						indicatorsList.accept(indicator);</span>
					}
<span class="nc bnc" id="L83" title="All 2 branches missed.">					if (index == 0) {</span>
<span class="nc" id="L84">						((HTMLElement&lt;?&gt;) slide).addClass(&quot;active&quot;);</span>
<span class="nc" id="L85">						indicator.addClass(&quot;active&quot;);</span>
					}
<span class="nc" id="L87">					++index;</span>
<span class="nc" id="L88">				}</span>
				
				// controls
<span class="nc bnc" id="L91" title="All 2 branches missed.">				if (semanticElement.isControls()) {</span>
<span class="nc" id="L92">					Button prevButton = htmlFactory.button()</span>
<span class="nc" id="L93">							.addClass(&quot;carousel-control-prev&quot;, &quot;border-0&quot;)</span>
<span class="nc" id="L94">							.attribute(&quot;type&quot;, &quot;button&quot;)</span>
<span class="nc" id="L95">							.attribute(&quot;data-target&quot;, &quot;#&quot; + id)</span>
<span class="nc" id="L96">							.attribute(&quot;data-slide&quot;, &quot;prev&quot;);</span>
					
<span class="nc" id="L98">					prevButton.accept(htmlFactory.span().addClass(&quot;carousel-control-prev-icon&quot;).attribute(&quot;aria-hidden&quot;, &quot;true&quot;));</span>
<span class="nc" id="L99">					prevButton.accept(htmlFactory.span(&quot;Previous&quot;).addClass(&quot;sr-only&quot;));</span>
<span class="nc" id="L100">					tag.accept(prevButton);</span>
					
<span class="nc" id="L102">					Button nextButton = htmlFactory.button()</span>
<span class="nc" id="L103">							.addClass(&quot;carousel-control-next&quot;, &quot;border-0&quot;)</span>
<span class="nc" id="L104">							.attribute(&quot;type&quot;, &quot;button&quot;)</span>
<span class="nc" id="L105">							.attribute(&quot;data-target&quot;, &quot;#&quot; + id)</span>
<span class="nc" id="L106">							.attribute(&quot;data-slide&quot;, &quot;next&quot;);</span>
					
<span class="nc" id="L108">					nextButton.accept(htmlFactory.span().addClass(&quot;carousel-control-next-icon&quot;).attribute(&quot;aria-hidden&quot;, &quot;true&quot;));</span>
<span class="nc" id="L109">					nextButton.accept(htmlFactory.span(&quot;Next&quot;).addClass(&quot;sr-only&quot;));</span>
<span class="nc" id="L110">					tag.accept(nextButton);</span>
				}
				
				// crossFade
<span class="nc bnc" id="L114" title="All 2 branches missed.">				if (semanticElement.isCrossFade()) {</span>
<span class="nc" id="L115">					tag.addClass(&quot;carousel-fade&quot;);</span>
				}
				
<span class="nc" id="L118">				return tag;</span>
			}
		};
		
<span class="nc" id="L122">		ListCompoundSupplierFactory&lt;Object&gt; slidesFactory = new ListCompoundSupplierFactory&lt;&gt;(&quot;Slides&quot;, EObjectAdaptable.adaptToSupplierFactoryNonNull(getTarget().getSlides(), Object.class));</span>
		
<span class="nc" id="L124">		return super.createConfigureFunction(context).then(slidesFactory.create(context).asFunction()).then(carouselFunction);</span>
	}

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>