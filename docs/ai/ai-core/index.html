<!DOCTYPE html>
<html lang="EN">
  <head>
    <title>Core</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cerulean/bootstrap.min.css" id="nsd-bootstrap-theme-stylesheet"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nasdanika-Models/html-app@master/gen/web-resources/css/app.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jstree@3.3.11/dist/themes/default/style.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.7.0/github-markdown.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.23.0/dist/bootstrap-vue.css"/>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika-Models/html-app@master/gen/web-resources/js/common.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika-Models/html-app@master/gen/web-resources/js/dark-head.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstree@3.3.11/dist/jstree.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.23.0/dist/bootstrap-vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika-Models/html-app@master/gen/web-resources/js/components/table.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/groovy.min.js"></script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9BRJVLK8CC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9BRJVLK8CC');
</script>   

<!--  Start search configuration -->
<script src="../../search-documents.js"></script>

<script src="https://cdn.jsdelivr.net/gh/olivernn/lunr.js@v2.3.9/lunr.js"></script>

<script>
// Script for full-text search of JsTree

window.nsdJsTreeSearchCallback = function(str, node) { 
    var sf = new $.vakata.search(str, true, { caseSensitive : false, fuzzy : false }); 
    if (sf.search(node.text).isMatch) {
		return true;
	} 
    let searchResult = this.search(str); 
    for (const sr in searchResult) {
        if (searchResult[sr].ref === node.original['data-nsd-label-uuid']) {
            return true;
        } 
    } 
    return false; 
}.bind(lunr(function () {
			  this.ref('id');
			  this.field('title');
			  this.field('content');

			  for (const key in searchDocuments) {
				  let doc = searchDocuments[key];
				this.add({
					id: doc['link-uuid'],
					title: doc.title,
					path: doc.path,
					content: doc.content
				});  
			  }
			}));
</script>
<!-- End search configuration  -->
 
</head>
  <body>
    <div class="container-fluid nsd-app-container">
      <div class="row">
        <div class="col nsd-app-header">
          <a href="../../index.html" data-nsd-label-uuid="4c3b3009-fd1e-45e1-a928-707b25f8cc5d" class="nsd-app-header-title">
            <img src="https://docs.nasdanika.org/images/nasdanika-logo.png" class="nsd-app-label-icon"/>Nasdanika</a>
          <ul class="nav nsd-app-header-navs">
            <li class="nav-item">
              <a href="../../search.html" data-nsd-label-uuid="f885066c-9679-4e47-a9fb-68a2b8fdebae" class="nav-link"><span class="fas fa-search nsd-app-label-icon"></span>Search</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row nsd-app-content-row">
        <div class="col nsd-app-navigation-panel">
          <div class="nsd-collapse-panel bg-light text-center"><span data-toggle="collapse" data-target="#nsd-nav-panel-f6d2d94e-a9ef-49e8-9919-5884b9f45682-collapsible" aria-expanded="true" aria-controls="nsd-nav-panel-f6d2d94e-a9ef-49e8-9919-5884b9f45682-collapsible" title="Toggle panel" id="nsd-nav-panel-f6d2d94e-a9ef-49e8-9919-5884b9f45682-collapsible-trigger" class="nsd-collapsible-trigger"><i aria-hidden="true" class="fa"></i></span>
          </div>
          <div id="nsd-nav-panel-f6d2d94e-a9ef-49e8-9919-5884b9f45682-collapsible" style="clear:right" class="nsd-collapsible collapse show">
            <input type="text" id="23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel_searchInput" title="Full-text search. You can use wildcards, e.g. 'foo*' or 'f*o'; title or content fields, e.g. 'title:foo* bar'; boosts, e.g. 'foo^10 bar'; fuzzy matches, e.g. 'foo~1'; and term presence, e.g. '+foo bar -baz'" class="form-control mt-1"/>
            <div id="23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel"></div>
            <script>$(document).ready( function() {
$('#23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel').jstree(function(tree) { tree.state.filter = function(state) { delete state.core.selected; return state; };  tree.search.search_callback = function(searchStr, node) { if (typeof window.nsdJsTreeSearchCallback === 'function') return window.nsdJsTreeSearchCallback(searchStr, node); var sf = new $.vakata.search(searchStr, true, { caseSensitive : false, fuzzy : false }); return sf.search(node.text).isMatch; }; return tree; }({"core":{"data":[{"a_attr":{"onclick":"window.location='https://github.com/Nasdanika-Knowledge';"},"children":[{"a_attr":{"onclick":"window.location='https://leanpub.com/beyond-diagrams';"},"icon":"fas fa-book","id":"nsd-app-nav-item-319f7154-a9fa-404c-b3a5-1b2427df6d7d","text":"Beyond Diagrams","type":"leaf"}],"icon":"/images/open-book.svg","id":"nsd-app-nav-item-5202a900-027d-460a-96a8-c3f052963b23","text":"Knowledge"},{"a_attr":{"onclick":"window.location='../../practices/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../practices/generic/index.html';"},"data-nsd-label-uuid":"fd8d178b-4666-40ae-aa75-8d5048ff1c16","id":"nsd-app-nav-item-0edd30af-c709-4d45-b9b6-5adedfa98078","text":"Analysis, Visualization & Generation","type":"leaf"},{"a_attr":{"onclick":"window.location='../../practices/java/index.html';"},"data-nsd-label-uuid":"2188d66c-9efb-436e-bca0-369f54057db4","id":"nsd-app-nav-item-61131d67-f23a-413a-944e-af6720e59e89","text":"Java Analysis, Visualization & Generation","type":"leaf"},{"a_attr":{"onclick":"window.location='../../practices/junit/index.html';"},"data-nsd-label-uuid":"5947fc52-7f87-41d4-8519-2782854686fc","id":"nsd-app-nav-item-962436fa-50a7-4749-bc57-88b925525dfb","text":"JUnit Tests Generation","type":"leaf"}],"data-nsd-label-uuid":"38b6ca78-3039-4ce7-a2fa-3acfd831755d","id":"nsd-app-nav-item-2445433c-c8f8-47e2-9511-602a4bae10dd","text":"Practices"},{"a_attr":{"onclick":"window.location='../../nsd-cli/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/app/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/app/site/index.html';"},"data-nsd-label-uuid":"f2c98c31-6dad-4a8b-aee0-927fd78f2e01","id":"nsd-app-nav-item-66afc6e2-167f-4583-8f84-e9f9870fb00e","text":"site","type":"leaf"}],"data-nsd-label-uuid":"ad63d6e9-96e8-4103-8e32-423934e741f7","id":"nsd-app-nav-item-d1664bba-3061-4424-83bb-af61ac2ff1f1","text":"app"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/html-app/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/html-app/crew-ai/index.html';"},"data-nsd-label-uuid":"423389d4-3c67-4cab-af4c-2b07f38052ee","icon":"https://crew-ai.models.nasdanika.org/images/crewai.svg","id":"nsd-app-nav-item-eb95caad-6985-4c71-bec1-28bb92f6dbf1","text":"crew-ai","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/html-app/save/index.html';"},"data-nsd-label-uuid":"b52e0197-57d3-4ca2-b4e2-fcdf04898620","icon":"https://img.icons8.com/dusk/20/save--v1.png","id":"nsd-app-nav-item-f83ceaab-451d-40e5-a687-737448b9f894","text":"save","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/html-app/site/index.html';"},"data-nsd-label-uuid":"c0d56342-f67c-4484-81bc-e58419096e08","icon":"https://img.icons8.com/material-two-tone/20/web.png","id":"nsd-app-nav-item-807c03d3-6484-4a33-925b-1ef7a6a6da20","text":"site","type":"leaf"}],"data-nsd-label-uuid":"db774f57-daeb-4aed-9383-57934ec1c4d3","icon":"https://docs.nasdanika.org/images/html-application.svg","id":"nsd-app-nav-item-ce1ca73a-dff7-40e7-ac31-b1dd147bd3da","text":"html-app"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/http-server/index.html';"},"data-nsd-label-uuid":"fb42de40-2d95-44c1-ac95-d4703c129a0b","icon":"https://docs.nasdanika.org/images/http.svg","id":"nsd-app-nav-item-4a9b5b1a-2572-43f9-9885-ab1079762282","text":"http-server","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/drawio/invoke/index.html';"},"data-nsd-label-uuid":"022e78ee-cdd9-4808-b33d-da7f5e91d567","icon":"https://docs.nasdanika.org/images/automation.svg","id":"nsd-app-nav-item-be027e9f-e11a-4928-9e15-349f201074e7","text":"invoke","type":"leaf"}],"data-nsd-label-uuid":"6f6c3518-a98a-48cb-88a8-ac37f2f7117d","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHJlY3QgeT0iMiIgeD0iMiIgd2lkdGg9IjI4IiByeD0iMS4xMiIgaGVpZ2h0PSIyOCIgZmlsbD0iI2YwODcwNSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI2RmNmMwYyIgZD0ibTE2Ljg2MSA5LjE2OCAzLjAyLTMuMTg3IDEwLjExOSAxMC4xMTN2MTIuNzg2YTEuMTE5IDEuMTE5IDAgMCAxIC0xLjEyIDEuMTJoLTE3LjU2NGwtNS4zODUtNS40MDd6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTI1LjI0IDE3Ljk2aC0zLjI5NGwtMy4wNzEtNS4zMmguMmExLjExOSAxLjExOSAwIDAgMCAxLjEyLTEuMTJ2LTQuNzZhMS4xMTkgMS4xMTkgMCAwIDAgLTEuMTItMS4xMmgtNi4xNTVhMS4xMTkgMS4xMTkgMCAwIDAgLTEuMTIgMS4xMnY0Ljc2YTEuMTE5IDEuMTE5IDAgMCAwIDEuMTIgMS4xMmguMjA1bC0zLjA3MSA1LjMyaC0zLjI5NGExLjExOSAxLjExOSAwIDAgMCAtMS4xMiAxLjEydjQuNzZhMS4xMTkgMS4xMTkgMCAwIDAgMS4xMiAxLjEyaDYuMTZhMS4xMTkgMS4xMTkgMCAwIDAgMS4xMi0xLjEydi00Ljc2YTEuMTE5IDEuMTE5IDAgMCAwIC0xLjEyLTEuMTJoLS45MjdsMy4wNzItNS4zMmgxLjg3bDMuMDcxIDUuMzJoLS45MjZhMS4xMTkgMS4xMTkgMCAwIDAgLTEuMTIgMS4xMnY0Ljc2YTEuMTE5IDEuMTE5IDAgMCAwIDEuMTIgMS4xMmg2LjE2YTEuMTE5IDEuMTE5IDAgMCAwIDEuMTItMS4xMnYtNC43NmExLjExOSAxLjExOSAwIDAgMCAtMS4xMi0xLjEyeiIvPjwvc3ZnPg==","id":"nsd-app-nav-item-bc6a204d-4abc-4fc9-85c7-ba22eabafb9a","text":"drawio"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/gsh/index.html';"},"data-nsd-label-uuid":"f5dc22e6-2518-4c69-9c30-2944c4714ee7","icon":"https://docs.nasdanika.org/images/command.svg","id":"nsd-app-nav-item-7a4ce033-655b-4799-abec-8cb80031abf6","text":"gsh","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/invoke/index.html';"},"data-nsd-label-uuid":"70da8d71-622d-4a7f-b09d-cf966dab799e","icon":"https://docs.nasdanika.org/images/automation.svg","id":"nsd-app-nav-item-939348b0-f93c-4569-bc5b-8dcbdad90804","text":"invoke","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/junit/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/junit/jacoco/index.html';"},"data-nsd-label-uuid":"504a45b5-5bb1-4689-bae4-cf5e0c49ac7d","id":"nsd-app-nav-item-99fb09a4-700d-498f-af70-9bb3e37b3a6b","text":"jacoco","type":"leaf"}],"data-nsd-label-uuid":"540577a0-a7f0-4447-a061-58a20cd9eedb","icon":"https://docs.nasdanika.org/images/JUnit.svg","id":"nsd-app-nav-item-d92b9850-a8af-4990-8428-05fe62e1d066","text":"junit"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/retrospect/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/retrospect/gsh/index.html';"},"data-nsd-label-uuid":"8ee480ae-7509-4392-9cef-b459bfdbd30c","icon":"https://docs.nasdanika.org/images/command.svg","id":"nsd-app-nav-item-4c7df7e4-3238-4f31-a125-6684d9286580","text":"gsh","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/contribute/retrospect/invoke/index.html';"},"data-nsd-label-uuid":"97aa8ae6-03e1-4a09-9309-e7288c9d3a4e","icon":"https://docs.nasdanika.org/images/automation.svg","id":"nsd-app-nav-item-9efbcc26-dc90-441a-ac54-166f7dde753b","text":"invoke","type":"leaf"}],"data-nsd-label-uuid":"394315d3-24f8-4413-b0de-1d39060c301a","icon":"https://docs.nasdanika.org/images/retrospective.svg","id":"nsd-app-nav-item-d2ef94f8-72fd-454d-96e2-236a6405f3c1","text":"retrospect"}],"data-nsd-label-uuid":"16ed84ed-433f-4a07-b912-6ee3670fd440","icon":"https://docs.nasdanika.org/images/jigsaw.svg","id":"nsd-app-nav-item-8ab6cf5b-111e-45cc-b63e-feac55b24066","text":"contribute"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/gsh/index.html';"},"data-nsd-label-uuid":"4e420ea6-c257-4e35-b3cb-cd7c5630412b","icon":"https://docs.nasdanika.org/images/command.svg","id":"nsd-app-nav-item-3fea9a1f-797e-41ea-9a50-1b770a58f370","text":"gsh","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gitlab/invoke/index.html';"},"data-nsd-label-uuid":"aa22eb41-8017-4cbd-bf8d-e41e5521fede","icon":"https://docs.nasdanika.org/images/automation.svg","id":"nsd-app-nav-item-d5f3f926-caef-4045-bf13-7e20bff6fd0a","text":"invoke","type":"leaf"}],"data-nsd-label-uuid":"bcaa4ceb-ff33-406f-8502-01be68f98930","icon":"https://docs.nasdanika.org/images/GitLab.svg","id":"nsd-app-nav-item-7ce0e550-b035-4c5c-b39b-7abed8ccabdf","text":"gitlab"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/gsh/index.html';"},"data-nsd-label-uuid":"9289aea8-9448-4384-a138-3be521a7c214","icon":"https://docs.nasdanika.org/images/command.svg","id":"nsd-app-nav-item-bb642fa7-bd1f-4a9e-a699-3054088be8ad","text":"gsh","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/help/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/help/site/index.html';"},"data-nsd-label-uuid":"8cc3454b-d285-477f-941f-10f2d403806c","icon":"https://img.icons8.com/material-two-tone/20/web.png","id":"nsd-app-nav-item-29832590-2636-4a21-8763-f8bf0b1ba726","text":"site","type":"leaf"}],"data-nsd-label-uuid":"bcc99fe4-900d-4466-a1ce-24ce230c28d9","icon":"far fa-question-circle","id":"nsd-app-nav-item-0538dadc-1f62-4168-a9c8-f75b26003993","text":"help"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/http-server/index.html';"},"data-nsd-label-uuid":"b7c7ce72-423e-4373-b739-48b8dbdc1c93","icon":"https://docs.nasdanika.org/images/http.svg","id":"nsd-app-nav-item-ffcbd7e9-d014-4839-ba7f-02904d30272a","text":"http-server","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/invoke/index.html';"},"data-nsd-label-uuid":"621e9461-007f-4e17-be2c-b842b1031956","icon":"https://docs.nasdanika.org/images/automation.svg","id":"nsd-app-nav-item-aad7cb1a-9f35-4c78-823c-6f69400521f6","text":"invoke","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/java/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/java/junit/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/java/junit/jacoco/index.html';"},"data-nsd-label-uuid":"befc5f9f-83dc-43b5-9693-064156578223","id":"nsd-app-nav-item-a2a0ae1e-3a09-4e69-8f73-ca22ad38ccd9","text":"jacoco","type":"leaf"}],"data-nsd-label-uuid":"d5ab42f6-38ba-484a-a1d9-a59f90e300d0","icon":"https://docs.nasdanika.org/images/JUnit.svg","id":"nsd-app-nav-item-8e6f7235-8fd4-44c8-bb59-4e9f56c59f76","text":"junit"}],"data-nsd-label-uuid":"40e34c2b-73b4-42e8-b88b-0f30894e9065","icon":"https://docs.nasdanika.org/images/java.svg","id":"nsd-app-nav-item-28a04e71-2b99-4211-b62d-1751abe48373","text":"java"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/launcher/index.html';"},"data-nsd-label-uuid":"455c23cf-26f7-46ea-a8ab-319bf84dbe5b","id":"nsd-app-nav-item-caa8aa1f-6f95-4b74-ac13-b95bcf81aa83","text":"launcher","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/crew-ai/index.html';"},"data-nsd-label-uuid":"1c5edfa4-fd49-49a2-aab2-fe7046a55453","icon":"https://crew-ai.models.nasdanika.org/images/crewai.svg","id":"nsd-app-nav-item-f648ca38-2871-48e6-99c7-73794962a024","text":"crew-ai","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/html-app/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/html-app/crew-ai/index.html';"},"data-nsd-label-uuid":"b95d68c6-5903-4528-bfdd-fe84a1842629","icon":"https://crew-ai.models.nasdanika.org/images/crewai.svg","id":"nsd-app-nav-item-bed56eaa-33d2-4d17-bb17-c0d3e1007893","text":"crew-ai","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/html-app/save/index.html';"},"data-nsd-label-uuid":"cda38a4d-e6ba-47ac-9175-351392b9b626","icon":"https://img.icons8.com/dusk/20/save--v1.png","id":"nsd-app-nav-item-d9eeee25-f86f-4080-8228-8b63ca4969bc","text":"save","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/html-app/site/index.html';"},"data-nsd-label-uuid":"6982205e-074f-4b35-af6e-a4203738c729","icon":"https://img.icons8.com/material-two-tone/20/web.png","id":"nsd-app-nav-item-0a7e9754-77b0-4c78-92e7-831eb50b470b","text":"site","type":"leaf"}],"data-nsd-label-uuid":"e58d1824-7dd6-4c84-9b21-b2c9df929ecc","icon":"https://docs.nasdanika.org/images/html-application.svg","id":"nsd-app-nav-item-98010eb1-da7f-4e76-be9f-438adf5429b3","text":"html-app"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/model/save/index.html';"},"data-nsd-label-uuid":"3edee7bf-938e-4744-b734-5f9c600bd564","icon":"https://img.icons8.com/dusk/20/save--v1.png","id":"nsd-app-nav-item-3988202d-e0a5-4bcf-93e4-c09f5916795a","text":"save","type":"leaf"}],"data-nsd-label-uuid":"47622287-a85b-41d2-aec5-fc3ab58940d3","icon":"https://docs.nasdanika.org/images/model.svg","id":"nsd-app-nav-item-a6bbd0db-658a-4f3b-9b21-faa9338763ae","text":"model"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/rules/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/rules/action-model/index.html';"},"data-nsd-label-uuid":"18134ce7-dea5-4c7c-9518-8d2641c08ff4","id":"nsd-app-nav-item-5476a43a-1aea-46d7-9c22-a7240fa2e5d0","text":"action-model","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/rules/list/index.html';"},"data-nsd-label-uuid":"aa1e0450-a52e-492f-a271-e43dfe7558cc","id":"nsd-app-nav-item-a2b639ec-5a3f-4f0c-96b3-208f786982c1","text":"list","type":"leaf"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/rules/site/index.html';"},"data-nsd-label-uuid":"851af2be-779e-4b70-a5e8-f4211684d728","id":"nsd-app-nav-item-1bf5631d-24c3-4d7a-a5c4-22395c990ddf","text":"site","type":"leaf"}],"data-nsd-label-uuid":"4a638d3f-e7b3-4c55-91c0-126a36d4374e","icon":"https://docs.nasdanika.org/images/rules.svg","id":"nsd-app-nav-item-6b217b0c-d634-45fc-8c86-a0903289f4f1","text":"rules"},{"a_attr":{"onclick":"window.location='../../nsd-cli/nsd/shell/index.html';"},"data-nsd-label-uuid":"a78b3472-b54c-403c-9ba5-bb984f6087c1","icon":"https://img.icons8.com/nolan/20/console.png","id":"nsd-app-nav-item-f198d61e-72f2-47b1-a9ce-c7b6c9289080","text":"shell","type":"leaf"}],"data-nsd-label-uuid":"db6c607a-7de4-4913-a521-4c471e23a647","id":"nsd-app-nav-item-01e8279b-f78f-4cb2-8035-5939ab1826f6","text":"nsd"}],"data-nsd-label-uuid":"cf45b70f-ba58-4430-8953-94533ef9806b","icon":"/images/command-line.svg","id":"nsd-app-nav-item-607e6931-6683-40f4-b1c5-28c1876e245e","text":"CLI"},{"a_attr":{"onclick":"window.location='../index.html';"},"children":[{"data-nsd-label-uuid":"b98d1891-5306-4bcd-af29-c05696416d0e","icon":"/images/geology.svg","state":{"selected":true},"id":"nsd_5n9","text":"Core","type":"leaf"},{"a_attr":{"onclick":"window.location='../mcp/index.html';"},"data-nsd-label-uuid":"7ed0b82f-72a4-4502-99bf-6a9bd9c30e5b","icon":"/images/mcp.png","id":"nsd-app-nav-item-29aa1aab-9f28-42b1-9c5c-af0693b29733","text":"MCP","type":"leaf"},{"a_attr":{"onclick":"window.location='../ollama/index.html';"},"data-nsd-label-uuid":"5537de2c-eba1-4077-a981-fec6948702a8","icon":"/images/ollama.png","id":"nsd-app-nav-item-4359784c-1fe9-4a84-8c66-63055bf27c91","text":"Ollama","type":"leaf"},{"a_attr":{"onclick":"window.location='../open-ai/index.html';"},"data-nsd-label-uuid":"3aca1ab2-f7fa-46b0-9b0b-ddd27b5cd9a4","icon":"/images/chat-gpt.svg","id":"nsd-app-nav-item-a19ed89b-a365-4adf-a8b6-872ca4941e67","text":"OpenAI","type":"leaf"}],"data-nsd-label-uuid":"26c1cf35-3e80-4825-9379-cd6b46c62cb3","icon":"/images/ai.svg","id":"nsd-app-nav-item-73c9b820-ebac-4992-a8fe-ee12da0aae04","text":"AI"},{"a_attr":{"onclick":"window.location='https://github.com/Nasdanika-Models';"},"children":[{"a_attr":{"onclick":"window.location='https://a2a.models.nasdanika.org/index.html';"},"id":"nsd-app-nav-item-e361754e-2fb2-4938-87ed-ef1fca3326b2","text":"A2a","type":"leaf"},{"a_attr":{"onclick":"window.location='https://html-app.models.nasdanika.org/index.html';"},"id":"nsd-app-nav-item-8a3055b7-b176-45b3-852a-e325b70fa29b","text":"App","type":"leaf"},{"a_attr":{"onclick":"window.location='https://architecture.models.nasdanika.org';"},"id":"nsd-app-nav-item-72d3d2b0-e5ba-4c89-9efd-40a6ee86bedd","text":"Architecture","type":"leaf"},{"a_attr":{"onclick":"window.location='https://azure.models.nasdanika.org';"},"id":"nsd-app-nav-item-71d60a36-462f-4f5c-9849-d25f35f52955","text":"Azure","type":"leaf"},{"a_attr":{"onclick":"window.location='https://bank.models.nasdanika.org';"},"id":"nsd-app-nav-item-fb394bfb-fbb7-4ca1-bf6a-45447aefe7f6","text":"Bank","type":"leaf"},{"a_attr":{"onclick":"window.location='https://bootstrap.models.nasdanika.org';"},"id":"nsd-app-nav-item-0b8d3eee-ed1f-40be-9bf0-d1e4225e5da0","text":"Bootstrap","type":"leaf"},{"a_attr":{"onclick":"window.location='https://capability.models.nasdanika.org';"},"id":"nsd-app-nav-item-9d9d8446-5ff6-4136-b43c-0b123a6d8d5f","text":"Capability","type":"leaf"},{"a_attr":{"onclick":"window.location='https://coverage.models.nasdanika.org';"},"id":"nsd-app-nav-item-5d7611d3-1ca9-456c-9b78-e2581f1f0ac3","text":"Coverage","type":"leaf"},{"a_attr":{"onclick":"window.location='https://crew-ai.models.nasdanika.org';"},"id":"nsd-app-nav-item-adfb95ea-5b22-4f95-9df8-904d3b7ea553","text":"CrewAI","type":"leaf"},{"a_attr":{"onclick":"window.location='https://mcda.models.nasdanika.org';"},"id":"nsd-app-nav-item-1816a73c-db1b-4c35-a430-4cea83f730a7","text":"Decision Analysis","type":"leaf"},{"a_attr":{"onclick":"window.location='https://echarts.models.nasdanika.org/graph';"},"id":"nsd-app-nav-item-11b06b25-04c7-4eef-8d02-beb6207cec89","text":"ECharts Graph","type":"leaf"},{"a_attr":{"onclick":"window.location='https://ecore.models.nasdanika.org';"},"id":"nsd-app-nav-item-bbfb8ab7-29f7-436f-a08d-7f23c926b822","text":"Ecore","type":"leaf"},{"a_attr":{"onclick":"window.location='https://enterprise.models.nasdanika.org';"},"id":"nsd-app-nav-item-6669ed3d-2f42-4e57-b0b3-18bf0eca5c1d","text":"Enterprise","type":"leaf"},{"a_attr":{"onclick":"window.location='https://excel.models.nasdanika.org';"},"id":"nsd-app-nav-item-3134ff01-5571-43a7-9344-0d026a9d41a4","text":"Excel","type":"leaf"},{"a_attr":{"onclick":"window.location='https://family.models.nasdanika.org';"},"id":"nsd-app-nav-item-4b30ee94-be57-47d7-abf3-8dabbd59b36c","text":"Family","type":"leaf"},{"a_attr":{"onclick":"window.location='https://flow.models.nasdanika.org';"},"id":"nsd-app-nav-item-6b5b99a3-7aff-45d8-b78e-7f5fbea323c5","text":"Flow","type":"leaf"},{"a_attr":{"onclick":"window.location='https://function-flow.models.nasdanika.org';"},"id":"nsd-app-nav-item-74851d42-79af-48ee-a21f-3af4e28af10b","text":"Function Flow","type":"leaf"},{"a_attr":{"onclick":"window.location='https://git.models.nasdanika.org';"},"id":"nsd-app-nav-item-89be9ff7-1be0-42e5-b3a9-71506f344a2b","text":"Git","type":"leaf"},{"a_attr":{"onclick":"window.location='https://gitlab.models.nasdanika.org';"},"id":"nsd-app-nav-item-db13ee55-80c6-4055-9ecf-ee73a6103dc5","text":"GitLab","type":"leaf"},{"a_attr":{"onclick":"window.location='https://html-app.models.nasdanika.org';"},"id":"nsd-app-nav-item-49509025-142a-4e03-bb2f-5864ed16074d","text":"HTML","type":"leaf"},{"a_attr":{"onclick":"window.location='https://java.models.nasdanika.org';"},"id":"nsd-app-nav-item-61b0739e-105a-4531-ac58-a6a15fd380db","text":"Java","type":"leaf"},{"a_attr":{"onclick":"window.location='https://jira.models.nasdanika.org';"},"id":"nsd-app-nav-item-6b2ea939-2235-4fca-8c1e-7f061f09af79","text":"Jira","type":"leaf"},{"a_attr":{"onclick":"window.location='https://maven.models.nasdanika.org';"},"id":"nsd-app-nav-item-6139885a-27dd-4067-9095-2414706bb280","text":"Maven","type":"leaf"},{"a_attr":{"onclick":"window.location='https://nature.models.nasdanika.org';"},"id":"nsd-app-nav-item-d0785748-906a-4710-952e-31d35a18b929","text":"Nature","type":"leaf"},{"a_attr":{"onclick":"window.location='https://pdf.models.nasdanika.org';"},"id":"nsd-app-nav-item-c7632c44-9c45-421f-a1e7-3df25de278b6","text":"PDF","type":"leaf"},{"a_attr":{"onclick":"window.location='https://party.models.nasdanika.org';"},"id":"nsd-app-nav-item-c34a2bf8-2693-4bfb-a601-0fef402742d3","text":"Party","type":"leaf"},{"a_attr":{"onclick":"window.location='https://python.models.nasdanika.org';"},"id":"nsd-app-nav-item-ea16f2b6-4043-4eab-8a35-530265e09e85","text":"Python","type":"leaf"},{"a_attr":{"onclick":"window.location='https://rules.models.nasdanika.org';"},"id":"nsd-app-nav-item-9666e85c-3315-4fd9-a023-6f47e55d4a73","text":"Rules","type":"leaf"},{"a_attr":{"onclick":"window.location='https://source-engineering.models.nasdanika.org';"},"id":"nsd-app-nav-item-8ba5186d-627b-43e7-9b35-e7ec5d8a759a","text":"Source Engineering","type":"leaf"}],"id":"nsd-app-nav-item-6c4d0aae-c6b3-413d-acd7-f47885255626","text":"Models"},{"a_attr":{"onclick":"window.location='../../html/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../html/bootstrap/index.html';"},"data-nsd-label-uuid":"608fe0f9-7016-4fcc-8fa2-feadbe4833e7","id":"nsd-app-nav-item-472ca3dc-a0cb-442a-8423-97b1311205e7","text":"Bootstrap","type":"leaf"},{"a_attr":{"onclick":"window.location='../../html/html/index.html';"},"data-nsd-label-uuid":"588d13d0-60ec-4b6a-a580-38b08c9dd72d","id":"nsd-app-nav-item-418c83d0-e3a2-4df8-b2b4-25a695ff0aa4","text":"HTML","type":"leaf"},{"a_attr":{"onclick":"window.location='../../html/jstree/index.html';"},"data-nsd-label-uuid":"96b9a9e3-b6e6-4ca9-b2f2-32c015c4848c","id":"nsd-app-nav-item-e2ce8bc0-5a86-488e-a231-a5996b671b43","text":"JsTree","type":"leaf"}],"data-nsd-label-uuid":"54f5fde6-891c-45a7-ac9c-4b32f7660497","icon":"/images/html.svg","id":"nsd-app-nav-item-11f63295-f7ac-443d-8f76-6db96c975533","text":"HTML"},{"a_attr":{"onclick":"window.location='../../core/index.html';"},"children":[{"a_attr":{"onclick":"window.location='../../core/cli/index.html';"},"data-nsd-label-uuid":"5b5b5054-eb40-4139-b677-90c79aed7830","icon":"/images/command-line.svg","id":"nsd-app-nav-item-719a4554-2740-4ae8-8b4a-80c43a076801","text":"CLI","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/capability/index.html';"},"data-nsd-label-uuid":"dee1d25d-6d35-434d-a00f-783e8c7c327c","id":"nsd-app-nav-item-64e68e02-74af-483d-8132-4541984d9da4","text":"Capability","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/common/index.html';"},"data-nsd-label-uuid":"9c441450-b975-4f0c-b521-fb7169a2e34a","id":"nsd-app-nav-item-caa62964-6ea4-43df-a443-307399b5639c","text":"Common","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/diagram/index.html';"},"data-nsd-label-uuid":"3ad58013-1d3d-4e53-8e68-c81606c2c865","id":"nsd-app-nav-item-46ae1324-fae7-4089-bf6c-dd45ed488ef4","text":"Diagram","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/drawio/index.html';"},"data-nsd-label-uuid":"d67019cc-43a2-419b-97ba-e1d769c26719","id":"nsd-app-nav-item-cb049be0-a910-47e3-8eb3-de8b6b64960a","text":"Drawio","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/emf/index.html';"},"data-nsd-label-uuid":"7bb079da-8eda-458e-86d2-0f89760b0d91","id":"nsd-app-nav-item-ab36d814-8f59-4493-8fee-a8b27256cff2","text":"EMF","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/exec/index.html';"},"data-nsd-label-uuid":"9c1db452-0506-4111-9a5f-9ac37feea517","id":"nsd-app-nav-item-91865059-093f-4fdc-a715-6d8719065b4f","text":"Exec","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/graph/index.html';"},"data-nsd-label-uuid":"98c2452f-5581-4469-b97d-9e259970b58a","icon":"/images/data-flow.svg","id":"nsd-app-nav-item-be25481d-e053-41c1-bc8c-f7f7429d88fe","text":"Graph","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/http/index.html';"},"data-nsd-label-uuid":"164451ba-0804-4022-ae88-daf07ae0cd5a","icon":"/images/http.svg","id":"nsd-app-nav-item-77d0acda-ca5b-46ce-bd4f-d91e75212ea3","text":"HTTP","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/mapping/index.html';"},"data-nsd-label-uuid":"c4f2cf1b-252a-4002-a420-e366e764b18c","icon":"/images/mapping.svg","id":"nsd-app-nav-item-e3c43a02-c8d2-479d-85e7-fb9039f5c64e","text":"Mapping","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/maven/index.html';"},"data-nsd-label-uuid":"307270c3-0295-4860-863e-56f8889db8f9","id":"nsd-app-nav-item-2c2e3b74-2207-477e-bb18-53f2294f724b","text":"Maven","type":"leaf"},{"a_attr":{"onclick":"window.location='https://ncore.models.nasdanika.org/';"},"id":"nsd-app-nav-item-a7fa1d85-74e6-4ab4-88c5-900f9116fc56","text":"Ncore","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/persistence/index.html';"},"data-nsd-label-uuid":"24a4b3c8-fcf9-40a0-afeb-8bcdb7de2940","id":"nsd-app-nav-item-cba2b86b-8bb7-4cb4-88fd-5726f84cd78a","text":"Persistence","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/resources/index.html';"},"data-nsd-label-uuid":"607da064-6940-4d22-94bf-f1d2995a0c31","id":"nsd-app-nav-item-73e570b0-cddc-47cb-b838-a4d855877978","text":"Resources","type":"leaf"},{"a_attr":{"onclick":"window.location='../../core/telemetry/index.html';"},"data-nsd-label-uuid":"ba375ffc-41da-4189-ac5a-203653f567d5","icon":"/images/OpenTelemetry.svg","id":"nsd-app-nav-item-64b14c01-0a24-4892-af58-2e7e748ece89","text":"Telemetry","type":"leaf"}],"data-nsd-label-uuid":"a3a39681-9cc6-4ab1-bb4b-51cbab310329","icon":"/images/earth.svg","id":"nsd-app-nav-item-d201b40b-8ad7-4914-a460-1262bc47bb65","text":"Core"}]},"search":{"show_only_matches":true,"show_only_matches_children":true},"types":{"leaf":{"icon":"jstree-file"}},"plugins":["state","type","search"],"state":{"key":"23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel"}}));
// Tokens: searchInputSelector, timer, treeSelector
$('#23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel_searchInput').keyup(function () {
    if (window['nsd_jstTreeSearchTimer_nsd_5os']) { 
		clearTimeout(window['nsd_jstTreeSearchTimer_nsd_5os']); 
	}
    window['nsd_jstTreeSearchTimer_nsd_5os'] = setTimeout(function () {
      var v = $('#23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel_searchInput').val();
      $('#23467867-c2c5-4948-95c8-6dc6bc984c42-navigation-panel').jstree(true).search(v);
    }, 250);
  });

});</script>
          </div>
        </div>
        <div data-nsd-label-uuid="b98d1891-5306-4bcd-af29-c05696416d0e" data-nsd-action-uris="uuid:b98d1891-5306-4bcd-af29-c05696416d0e" class="col nsd-app-content-panel">
          <div class="container-fluid">
            <div class="row nsd-app-content-panel-breadcrumb-row">
              <div class="col">
                <nav aria-label="breadcrumb" class="nsd-app-content-panel-breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="../index.html" data-nsd-label-uuid="26c1cf35-3e80-4825-9379-cd6b46c62cb3">
                        <img src="/images/ai.svg" class="nsd-app-label-icon"/>AI</a>
                    </li>
                    <li class="breadcrumb-item active"><span data-nsd-label-uuid="b98d1891-5306-4bcd-af29-c05696416d0e"><img src="/images/geology.svg" class="nsd-app-label-icon"/>Core</span>
                    </li>
                  </ol>
                </nav>
              </div>
            </div>
            <div class="row nsd-app-content-panel-title-and-items-row">
              <div class="col-auto">
                <H1><span data-nsd-label-uuid="b98d1891-5306-4bcd-af29-c05696416d0e" class="nsd-app-content-panel-title"><img src="/images/geology.svg" class="nsd-app-label-icon"/>Core</span>
                </H1>
              </div>
            </div>
            <div class="row nsd-app-content-panel-content-row">
              <div class="col">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col"><div class="markdown-body"><p>This module provides AI interfaces implemented by provider modules such as <a href="../open-ai/index.html">OpenAI</a> and <a href="../ollama/index.html">Ollama</a>. It also provides classes and interfaces for building similarity search and RAG solutions.</p>
<ul>
<li><a href="https://github.com/Nasdanika/ai/tree/main/core">Sources</a></li>
<li><a href="https://javadoc.io/doc/org.nasdanika.ai/core">Javadoc</a></li>
</ul>
<p>See <a href="https://github.com/Nasdanika/ai/blob/main/tests/src/test/java/org/nasdanika/ai/openai/tests/tests/TestAI.java">test sources</a> for examples of using Nasdanika AI classes.</p>
<ul>
<li><a href="#embeddings">Embeddings</a>
<ul>
<li><a href="#generating">Generating</a>
<ul>
<li><a href="#synchronous">Synchronous</a>
<ul>
<li><a href="#with-telemetry">With telemetry</a>
<ul>
<li><a href="#all-providers-and-models">All providers and models</a></li>
<li><a href="#a-specific-provider">A specific provider</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#asynchronous">Asynchronous</a>
<ul>
<li><a href="#with-telemetry">With telemetry</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#chunking">Chunking</a></li>
<li><a href="#embeddings-resource">Embeddings resource</a></li>
</ul>
</li>
<li><a href="#similarity-search">Similarity search</a></li>
<li><a href="#chat">Chat</a>
<ul>
<li><a href="#with-telemetery">With telemetery</a></li>
<li><a href="#retrieval-augmented-generation-rag">Retrieval-augmented generation (RAG)</a></li>
</ul>
</li>
</ul>
<h2><a href="#embeddings" id="embeddings">Embeddings</a></h2>
<p><a href="https://github.com/Nasdanika/ai/blob/main/core/src/main/java/org/nasdanika/ai/Embeddings.java">Embeddings</a> interface allows to generate one or more vectors per string. This follows the structure of Ollama REST API. This approach allows transparent chunking, which is provided by <a href="https://github.com/Nasdanika/ai/blob/main/core/src/main/java/org/nasdanika/ai/ChunkingEmbeddings.java">ChunkingEmbeddings</a> class and its subclasses, <a href="https://github.com/Nasdanika/ai/blob/main/core/src/main/java/org/nasdanika/ai/EncodingChunkingEmbeddings.java">EncodingChunkingEmbeddings</a> in particular.</p>
<h3><a href="#generating" id="generating">Generating</a></h3>
<h4><a href="#synchronous" id="synchronous">Synchronous</a></h4>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();
try {
    Requirement&lt;Void, org.nasdanika.ai.Embeddings&gt; requirement = ServiceCapabilityFactory.createRequirement(org.nasdanika.ai.Embeddings.class);         
    org.nasdanika.ai.Embeddings embeddings = capabilityLoader.loadOne(requirement, progressMonitor);
    
    for(List&lt;Float&gt; vector: embeddings.generate(&quot;Hello world!&quot;)) {
        System.out.println(vector.size());
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h5><a href="#with-telemetry" id="with-telemetry">With telemetry</a></h5>
<h6><a href="#all-providers-and-models" id="all-providers-and-models">All providers and models</a></h6>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();             
try {
    OpenTelemetry openTelemetry = capabilityLoader.loadOne(ServiceCapabilityFactory.createRequirement(OpenTelemetry.class), progressMonitor);
    assertNotNull(openTelemetry);           
    
    Requirement&lt;Embeddings.Requirement, Embeddings&gt; requirement = ServiceCapabilityFactory.createRequirement(Embeddings.class);         
    Iterable&lt;CapabilityProvider&lt;Embeddings&gt;&gt; embeddingsProviders = capabilityLoader.load(requirement, progressMonitor);
    List&lt;Embeddings&gt; allEmbeddings = new ArrayList&lt;&gt;();
    embeddingsProviders.forEach(ep -&gt; ep.getPublisher().subscribe(allEmbeddings::add));
    for (Embeddings embeddings: allEmbeddings) {                
        assertNotNull(embeddings);
        System.out.println(&quot;=== Embeddings ===&quot;);
        System.out.println(&quot;Name:\t&quot; + embeddings.getName());
        System.out.println(&quot;Provider:\t&quot; + embeddings.getProvider());
        System.out.println(&quot;Max input:\t&quot; + embeddings.getMaxInputTokens());
        System.out.println(&quot;Dimensions:\t&quot; + embeddings.getDimensions());
                
        Tracer tracer = openTelemetry.getTracer(&quot;test.ai&quot;);        
        Span span = tracer
            .spanBuilder(&quot;Embeddings&quot;)
            .startSpan();
        
        try (Scope scope = span.makeCurrent()) {
            Thread.sleep(200);
            for (Entry&lt;String, List&lt;List&lt;Float&gt;&gt;&gt; vectors: embeddings.generate(List.of(&quot;Hello world!&quot;, &quot;Hello universe!&quot;)).entrySet()) {        
                System.out.println(&quot;\t&quot; + vectors.getKey());
                for (List&lt;Float&gt; vector: vectors.getValue()) {
                    System.out.println(&quot;\t\t&quot; + vector.size());
                }
            }
        } finally {
            span.end();
        }
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h6><a href="#a-specific-provider" id="a-specific-provider">A specific provider</a></h6>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();             
try {
    OpenTelemetry openTelemetry = capabilityLoader.loadOne(ServiceCapabilityFactory.createRequirement(OpenTelemetry.class), progressMonitor);
    assertNotNull(openTelemetry);           
    
    Embeddings.Requirement eReq = new Embeddings.Requirement(&quot;Ollama&quot;, null, null, 0, 0);
    Requirement&lt;Embeddings.Requirement, Embeddings&gt; requirement = ServiceCapabilityFactory.createRequirement(Embeddings.class, null, eReq);         
    Iterable&lt;CapabilityProvider&lt;Embeddings&gt;&gt; embeddingsProviders = capabilityLoader.load(requirement, progressMonitor);
    List&lt;Embeddings&gt; allEmbeddings = new ArrayList&lt;&gt;();
    embeddingsProviders.forEach(ep -&gt; ep.getPublisher().subscribe(allEmbeddings::add));
    for (Embeddings embeddings: allEmbeddings) {                
        assertNotNull(embeddings);
        System.out.println(&quot;=== Embeddings ===&quot;);
        System.out.println(&quot;Name:\t&quot; + embeddings.getName());
        System.out.println(&quot;Provider:\t&quot; + embeddings.getProvider());
        System.out.println(&quot;Max input:\t&quot; + embeddings.getMaxInputTokens());
        System.out.println(&quot;Dimensions:\t&quot; + embeddings.getDimensions());
                
        Tracer tracer = openTelemetry.getTracer(&quot;test.ai&quot;);        
        Span span = tracer
            .spanBuilder(&quot;Embeddings&quot;)
            .startSpan();
        
        try (Scope scope = span.makeCurrent()) {
            Thread.sleep(200);
            for (Entry&lt;String, List&lt;List&lt;Float&gt;&gt;&gt; vectors: embeddings.generate(List.of(&quot;Hello world!&quot;, &quot;Hello universe!&quot;)).entrySet()) {        
                System.out.println(&quot;\t&quot; + vectors.getKey());
                for (List&lt;Float&gt; vector: vectors.getValue()) {
                    System.out.println(&quot;\t\t&quot; + vector.size());
                }
            }
            span.setStatus(StatusCode.OK);
        } finally {
            span.end();
        }
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h4><a href="#asynchronous" id="asynchronous">Asynchronous</a></h4>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();
try {
    Requirement&lt;Embeddings.Requirement, Embeddings&gt; requirement = ServiceCapabilityFactory.createRequirement(Embeddings.class);         
    Embeddings embeddings = capabilityLoader.loadOne(requirement, progressMonitor);
    
    List&lt;List&lt;Float&gt;&gt; vectors = embeddings
        .generateAsync(&quot;Hello world!&quot;)
        .contextWrite(reactor.util.context.Context.of(Context.class, Context.current().with(span)))
        .block();

    for (List&lt;Float&gt; vector: vectors) {
        System.out.println(vector.size());
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h5><a href="#with-telemetry" id="with-telemetry">With telemetry</a></h5>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();
try {
    Requirement&lt;Embeddings.Requirement, Embeddings&gt; requirement = ServiceCapabilityFactory.createRequirement(Embeddings.class);         
    Embeddings embeddings = capabilityLoader.loadOne(requirement, progressMonitor);
    
    OpenTelemetry openTelemetry = capabilityLoader.loadOne(ServiceCapabilityFactory.createRequirement(OpenTelemetry.class), progressMonitor);

    Tracer tracer = openTelemetry.getTracer(&quot;test.ai&quot;);        
    Span span = tracer
        .spanBuilder(&quot;Embeddings&quot;)
        .startSpan();
    
    List&lt;List&lt;Float&gt;&gt; vectors = embeddings
        .generateAsync(&quot;Hello world!&quot;)
        .contextWrite(reactor.util.context.Context.of(Context.class, Context.current().with(span)))
        .doFinally(signal -&gt; span.end())
        .block();

    for (List&lt;Float&gt; vector: vectors) {
        System.out.println(vector.size());
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h3><a href="#chunking" id="chunking">Chunking</a></h3>
<p>Chunking embeddings for <a href="https://platform.openai.com/docs/guides/embeddings#embedding-models"><code>text-embedding-ada-002</code></a> using <code>CL100K_BASE</code> encoding. <code>1000</code> tokens chunks with <code>20</code> tokens overlap.</p>
<pre><code class="language-java">ChunkingEmbeddings&lt;?&gt; chunkingEmbeddings = new EncodingChunkingEmbeddings(
        embeddings, 
        1000, 
        20, 
        EncodingType.CL100K_BASE);
</code></pre>
<h3><a href="#embeddings-resource" id="embeddings-resource">Embeddings resource</a></h3>
<p><a href="https://github.com/Nasdanika/ai/blob/main/core/src/main/java/org/nasdanika/ai/EmbeddingsResource.java">EmbeddingsResource</a> provides content with pre-computed embeddings. It is modeled after <a href="https://javadoc.io/doc/io.modelcontextprotocol.sdk/mcp/latest/io.modelcontextprotocol.sdk.mcp/io/modelcontextprotocol/spec/McpSchema.Resource.html">McpSchema.Resource</a> (see also <a href="https://modelcontextprotocol.io/docs/concepts/resources">MCP Resources</a>) to make it easy to wrap an embedding resources into an MCP resource and vice versa.</p>
<p>The idea is to publish text with embeddings and expose the data as an MCP resource and embeddings resource so it can be used by MCP clients, MCP tools, and there is no need to compute embeddings.</p>
<p>Example: <a href="https://docs.nasdanika.org/search-documents-embeddings.json">search-documents-embeddings.json</a> contains plain text for the pages of this site with pre-computed Ada embeddings of page chunks.</p>
<h2><a href="#similarity-search" id="similarity-search">Similarity search</a></h2>
<p><a href="https://github.com/Nasdanika/ai/blob/main/core/src/main/java/org/nasdanika/ai/SimilaritySearch.java">SimilaritySearch</a> interface is intended to be used for finding items similar to a query using one of <code>find</code> methods:</p>
<ul>
<li><code>List&lt;SearchResult&lt;D&gt;&gt; find(U query, int numberOfItems)</code></li>
<li><code>Mono&lt;List&lt;SearchResult&lt;D&gt;&gt;&gt; findAsync(U query, int numberOfItems)</code></li>
</ul>
<p>Similarity search can work on any data type with a distance defined. The distance type must be <code>Comparable</code>. For example, for text distance can be computed using embeddings, a bag of words, a semantic graph, or a combination of thereof.</p>
<p>Semantic graphs may be useful with internal terminology. Let&rsquo;s say there is a <code>GBS</code> system which uses IBM MQ for communication with payload structure defined as <code>TVT</code> and encoded to bytes using <code>XLF</code>. The semantic/knowledge graph would &ldquo;know&rdquo; that <code>GBS</code> stands for &ldquo;Global Booking System&rdquo; and it is related to <code>TVT</code>, <code>MQ</code>, and <code>XLF</code><sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p>
<p>An instance of similarity search can be adapted to another type using <code>adapt(Function&lt;U,T&gt; mapper, Function&lt;U, Mono&lt;T&gt;&gt; asyncMapper)</code> method. One usage scenario is to adapt a structured type to text by &ldquo;narrating&rdquo; it. For example, there is a <a href="../../core/drawio/index.html">Drawio</a> diagram element or a <a href="https://architecture.models.nasdanika.org/references/eSubpackages/c4/index.html">C4 Model</a> element, say <a href="https://nasdanika-demos.github.io/internet-banking-system-c4/cerulean/references/elements/internet-banking-system/references/elements/api-application/index.html">API Application</a>.</p>
<p>In the case of a diagram element, it can be converted to text by explaining its label, tooltip, layer it belongs to, and other elements it connects to - this is different from computer vision because tooltips and layers are not visible. The narration may also include styling such as color and geometry. E.g. &ldquo;above&rdquo;, &ldquo;to the right of&rdquo;.</p>
<p>In the case of a model element the narration would include element documentation, its references, and its type.</p>
<p>E.g.:</p>
<ul>
<li>The &ldquo;API Application&rdquo; is a <a href="https://architecture.models.nasdanika.org/references/eSubpackages/c4/references/eClassifiers/Container/index.html">Container</a>.</li>
<li><a href="https://nasdanika-demos.github.io/family-semantic-mapping/references/members/paul/index.html">Paul</a> is a <a href="https://family.models.nasdanika.org/references/eClassifiers/Man/index.html">Man</a>.</li>
</ul>
<p>Documentation may be in plain text or, for example, <a href="../../core/exec/index.html#markdown">Markdown</a>. In the latter case fenced blocks with diagrams can be narrated as explained above and images can be explained using vision models like ChatGPT. Image alternative text can be used as well.</p>
<p>Static <code>embeddingSearch()</code> method adapts a float multi-vector search to string (text) search. There is a static method to adapt a single vector search to a multi-vector search.</p>
<p>The below code snippet shows how to create a vector search instance on top of <a href="https://github.com/jelmerk/hnswlib">Hnswlib</a>:</p>
<pre><code class="language-java">HnswIndex&lt;IndexId, float[], EmbeddingsItem, Float&gt; hnswIndex = HnswIndex
    .newBuilder(1536, DistanceFunctions.FLOAT_COSINE_DISTANCE, resources.size())
    .withM(16)
    .withEf(200)
    .withEfConstruction(200)
    .build();

Map&lt;String, String&gt; contentMap = new HashMap&lt;&gt;();

resourceSet.getResources().subscribe(er -&gt; {
    List&lt;List&lt;Float&gt;&gt; vectors = er.getEmbeddings();
    for (int i = 0; i &lt; vectors.size(); ++i) {
        List&lt;Float&gt; vector = vectors.get(i);
        float[] fVector = new float[vector.size()];
        for (int j = 0; j &lt; fVector.length; ++j) {
            fVector[j] = vector.get(j);
        }
        hnswIndex.add(new EmbeddingsItem(
                new IndexId(er.getUri(), i), 
                fVector, 
                er.getDimensions()));               
    }
    contentMap.put(er.getUri(), er.getContent());
});

hnswIndex.save(new File(&quot;test-data/hnsw-index.bin&quot;));

SimilaritySearch&lt;List&lt;Float&gt;, Float&gt; vectorSearch = new SimilaritySearch&lt;List&lt;Float&gt;, Float&gt;() {
    
    @Override
    public Mono&lt;List&lt;SearchResult&lt;Float&gt;&gt;&gt; findAsync(List&lt;Float&gt; query, int numberOfItems) {
        return Mono.just(find(query, numberOfItems));
    }
    
    @Override
    public List&lt;SearchResult&lt;Float&gt;&gt; find(List&lt;Float&gt; query, int numberOfItems) {
        float[] fVector = new float[query.size()];
        for (int j = 0; j &lt; fVector.length; ++j) {
            fVector[j] = query.get(j);
        }
        List&lt;SearchResult&lt;Float&gt;&gt; ret = new ArrayList&lt;&gt;();
        for (com.github.jelmerk.hnswlib.core.SearchResult&lt;EmbeddingsItem, Float&gt; nearest: hnswIndex.findNearest(fVector, numberOfItems)) {
            ret.add(new SearchResult&lt;Float&gt;() {
                
                @Override
                public String getUri() {
                    return nearest.item().id().uri();
                }
                
                @Override
                public int getIndex() {
                    return nearest.item().id().index();
                }
                
                @Override
                public Float getDistance() {
                    return nearest.distance();
                }
                
            });
        }
        return ret;
    }
    
};      

</code></pre>
<p>An instance of vector search can be adapted to a multi-vector search:</p>
<pre><code class="language-java">SimilaritySearch&lt;List&lt;List&lt;Float&gt;&gt;, Float&gt; multiVectorSearch = SimilaritySearch.adapt(vectorSearch);
</code></pre>
<p>and then to a text search:</p>
<pre><code class="language-java">ChunkingEmbeddings&lt;?&gt; chunkingEmbeddings = new EncodingChunkingEmbeddings(
        embeddings, 
        1000, 
        20, 
        EncodingType.CL100K_BASE);

SimilaritySearch&lt;String, Float&gt; textSearch = SimilaritySearch.embeddingsSearch(multiVectorSearch, chunkingEmbeddings);
</code></pre>
<h2><a href="#chat" id="chat">Chat</a></h2>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();
try {
    Requirement&lt;Void, Chat&gt; requirement = ServiceCapabilityFactory.createRequirement(Chat.class);           
    org.nasdanika.ai.Chat chat = capabilityLoader.loadOne(requirement, progressMonitor);
    
    List&lt;ResponseMessage&gt; responses = chat.chat(
        Chat.Role.system.createMessage(&quot;You are a helpful assistant. You will talk like a pirate.&quot;),
        Chat.Role.user.createMessage(&quot;Can you help me?&quot;),
        Chat.Role.system.createMessage(&quot;Of course, me hearty! What can I do for ye?&quot;),
        Chat.Role.user.createMessage(&quot;What's the best way to train a parrot?&quot;)
    );
        
    for (ResponseMessage response: responses) {
        System.out.println(response.getContent());
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h3><a href="#with-telemetery" id="with-telemetery">With telemetery</a></h3>
<pre><code class="language-java">CapabilityLoader capabilityLoader = new CapabilityLoader();
ProgressMonitor progressMonitor = new PrintStreamProgressMonitor();
try {
    Requirement&lt;Void, Chat&gt; requirement = ServiceCapabilityFactory.createRequirement(Chat.class);           
    org.nasdanika.ai.Chat chat = capabilityLoader.loadOne(requirement, progressMonitor);
    
    OpenTelemetry openTelemetry = capabilityLoader.loadOne(ServiceCapabilityFactory.createRequirement(OpenTelemetry.class), progressMonitor);

    Tracer tracer = openTelemetry.getTracer(&quot;test.openai&quot;);        
    Span span = tracer
        .spanBuilder(&quot;Chat&quot;)
        .startSpan();
    
    try (Scope scope = span.makeCurrent()) {
        List&lt;ResponseMessage&gt; responses = chat.chat(
            Chat.Role.system.createMessage(&quot;You are a helpful assistant. You will talk like a pirate.&quot;),
            Chat.Role.user.createMessage(&quot;Can you help me?&quot;),
            Chat.Role.system.createMessage(&quot;Of course, me hearty! What can I do for ye?&quot;),
            Chat.Role.user.createMessage(&quot;What's the best way to train a parrot?&quot;)
        );
        
        for (ResponseMessage response: responses) {
            System.out.println(response.getContent());
        }
    } finally {
        span.end();
    }
} finally {
    capabilityLoader.close(progressMonitor);
}
</code></pre>
<h3><a href="#retrieval-augmented-generation-rag" id="retrieval-augmented-generation-rag">Retrieval-augmented generation (RAG)</a></h3>
<p>The below code snippet shows how chat can be used with the text search for <a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation">retrieval-augmented generation</a>:</p>
<pre><code class="language-java">String query = ...
List&lt;SearchResult&lt;Float&gt;&gt; searchResults = textSearch.find(query, 10);
  
// Chat
Chat.Requirement cReq = new Chat.Requirement(&quot;OpenAI&quot;, &quot;gpt-4o&quot;, null);
Requirement&lt;Chat.Requirement, Chat&gt; chatRequirement = ServiceCapabilityFactory.createRequirement(Chat.class, null, cReq);
Chat chat = capabilityLoader.loadOne(chatRequirement, progressMonitor);

List&lt;Chat.Message&gt; messages = new ArrayList&lt;&gt;();
messages.add(Chat.Role.system.createMessage(&quot;You are a helpful assistant. You will answer user question leveraging provided documents and provide references to the used documents. Output your answer in markdown&quot;));
messages.add(Chat.Role.user.createMessage(query));

Map&lt;String, List&lt;SearchResult&lt;Float&gt;&gt;&gt; groupedResults = org.nasdanika.common.Util.groupBy(searchResults, SearchResult::getUri);
for (Entry&lt;String, List&lt;SearchResult&lt;Float&gt;&gt;&gt; sre: groupedResults.entrySet()) {
    StringBuilder messageBuilder = new StringBuilder(&quot;Use this document with URL &quot; + sre.getKey() + &quot;:&quot; + System.lineSeparator());
    List&lt;String&gt; chunks = chunkingEmbeddings.chunk(contentMap.get(sre.getKey()));
    for (SearchResult&lt;Float&gt; chunkResult: sre.getValue()) {
        String chunk = chunks.get(chunkResult.getIndex());
        messageBuilder.append(System.lineSeparator() + System.lineSeparator() + chunk);
    }
    
    messages.add(Chat.Role.system.createMessage(messageBuilder.toString()));
}       

List&lt;ResponseMessage&gt; responses = chat.chat(messages);                              

for (ResponseMessage response: responses) {
    System.out.println(response.getContent());
}               
</code></pre>
<p>Please note that this is a very basic implementation:</p>
<ul>
<li>It doesn&rsquo;t take the size of the context window into account and doesn&rsquo;t count input tokens.</li>
<li>It uses all search results regardless of the distance. A more robust implementation would discard results with the distance greater than some threshold and perhaps would reply &ldquo;Not enough information&rdquo; if there are no good matches.</li>
</ul>
<p>Also the example above is a single-shot - ask a question, get an answer, it is not a dialog.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>See <a href="https://medium.com/nasdanika/connecting-the-dots-94a733c61059">Connecting the dots</a> and <a href="https://medium.com/nasdanika/architecture-as-code-7c0eadfc0b2b">Architecture as code</a> stories for more details.</p>
<a href="#fnref-1" class="footnote-backref">&#8617;</a>
</li>
</ol>
</div>
</div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col nsd-app-footer">
          <ul class="nav nsd-app-footer-navs">
            <li class="nav-item">
              <a href="https://github.com/Nasdanika/nasdanika.github.io/" data-nsd-label-uuid="ddb39666-5980-4990-a5a1-f7e5455bb197" class="nav-link"><span class="fab fa-github nsd-app-label-icon"></span>Source</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>